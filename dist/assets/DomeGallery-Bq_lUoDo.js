import{r as n,u as Ke,j as b,P as s}from"./react-vendor-RQvcKoYc.js";import"./vendor-BZ7bXmmK.js";const Ze=[{src:"https://images.unsplash.com/photo-1755331039789-7e5680e26e8f?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Abstract art"},{src:"https://images.unsplash.com/photo-1755569309049-98410b94f66d?q=80&w=772&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Modern sculpture"},{src:"https://images.unsplash.com/photo-1755497595318-7e5e3523854f?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Digital artwork"},{src:"https://images.unsplash.com/photo-1755353985163-c2a0fe5ac3d8?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Contemporary art"},{src:"https://images.unsplash.com/photo-1745965976680-d00be7dc0377?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Geometric pattern"},{src:"https://images.unsplash.com/photo-1752588975228-21f44630bb3c?q=80&w=774&auto=format&fit=crop&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D",alt:"Textured surface"},{src:"https://pbs.twimg.com/media/Gyla7NnXMAAXSo_?format=jpg&name=large",alt:"Social media image"}],J={maxVerticalRotationDeg:5,dragSensitivity:20,enlargeTransitionMs:300,segments:26,autoRotateSpeed:4},_=(y,M,D)=>Math.min(Math.max(y,M),D),Se=y=>(y%360+360)%360,Re=y=>((y+180)%360+360)%360-180,le=(y,M,D)=>{const E=y.dataset[M]??y.getAttribute(`data-${M}`),Y=E==null?NaN:parseFloat(E);return Number.isFinite(Y)?Y:D};function Je(y,M){const D=Array.from({length:M},(o,c)=>-37+c*2),E=[-4,-2,0,2,4],Y=[-3,-1,1,3,5],k=D.flatMap((o,c)=>(c%2===0?E:Y).map(Q=>({x:o,y:Q,sizeX:2,sizeY:2}))),j=k.length;if(y.length===0)return k.map(o=>({...o,src:"",alt:""}));y.length>j&&console.warn(`[DomeGallery] Provided image count (${y.length}) exceeds available tiles (${j}). Some images will not be shown.`);const z=y.map(o=>typeof o=="string"?{src:o,alt:"",title:"",description:""}:{src:o.src||"",alt:o.alt||"",title:o.title||o.alt||"",description:o.description||""}),f=Array.from({length:j},(o,c)=>z[c%z.length]);for(let o=1;o<f.length;o++)if(f[o].src===f[o-1].src){for(let c=o+1;c<f.length;c++)if(f[c].src!==f[o].src){const F=f[o];f[o]=f[c],f[c]=F;break}}return k.map((o,c)=>({...o,src:f[c].src,alt:f[c].alt,title:f[c].title||f[c].alt,description:f[c].description||""}))}function Qe(y,M,D,E,Y){const k=360/Y/2,j=k*(y+(D-1)/2);return{rotateX:k*(M-(E-1)/2),rotateY:j}}function et({images:y=Ze,fit:M=.5,fitBasis:D="auto",minRadius:E=600,maxRadius:Y=1/0,padFactor:k=.25,overlayBlurColor:j="#060010",maxVerticalRotationDeg:z=J.maxVerticalRotationDeg,dragSensitivity:f=J.dragSensitivity,enlargeTransitionMs:o=J.enlargeTransitionMs,segments:c=J.segments,autoRotateSpeed:F=J.autoRotateSpeed,dragDampening:Q=2,openedImageWidth:O="300px",openedImageHeight:I="350px",imageBorderRadius:ue="30px",openedImageBorderRadius:de="30px",grayscale:fe=!1,showOverlays:Be=!0}){const N=n.useRef(null),V=n.useRef(null),Ae=n.useRef(null),ee=n.useRef(null),W=n.useRef(null),me=n.useRef(null),B=n.useRef(null),pe=n.useRef(null),g=n.useRef({x:0,y:0}),ye=n.useRef({x:0,y:0}),te=n.useRef(null),q=n.useRef(!1),H=n.useRef(!1),G=n.useRef(null),P=n.useRef(!1),Me=n.useRef(0),he=n.useRef(0),re=n.useRef(!1),Ce=n.useCallback(()=>{re.current||(re.current=!0,document.body.classList.add("dg-scroll-lock"))},[]),ne=n.useCallback(()=>{var e;re.current&&((e=N.current)==null?void 0:e.getAttribute("data-enlarging"))!=="true"&&(re.current=!1,document.body.classList.remove("dg-scroll-lock"))},[]),Pe=n.useMemo(()=>Je(y,c),[y,c]),U=(e,r)=>{const v=Ae.current;v&&(v.style.transform=`translateZ(calc(var(--radius) * -1)) rotateX(${e}deg) rotateY(${r}deg)`)},De=n.useRef(null);n.useEffect(()=>{const e=N.current;if(!e)return;const r=new ResizeObserver(v=>{var A;const i=v[0].contentRect,l=Math.max(1,i.width),m=Math.max(1,i.height),u=Math.min(l,m),x=Math.max(l,m),w=l/m;let d;switch(D){case"min":d=u;break;case"max":d=x;break;case"width":d=l;break;case"height":d=m;break;default:d=w>=1.3?l:u}let h=d*M;const p=m*1.35;h=Math.min(h,p),h=_(h,E,Y),De.current=Math.round(h);const a=Math.max(8,Math.round(u*k));e.style.setProperty("--radius",`${De.current}px`),e.style.setProperty("--viewer-pad",`${a}px`),e.style.setProperty("--overlay-blur-color",j),e.style.setProperty("--tile-radius",ue),e.style.setProperty("--enlarge-radius",de),e.style.setProperty("--image-filter",fe?"grayscale(1)":"none"),U(g.current.x,g.current.y);const R=(A=W.current)==null?void 0:A.querySelector(".enlarge");if(R&&ee.current&&V.current){const t=ee.current.getBoundingClientRect(),C=V.current.getBoundingClientRect();if(O&&I){const X=document.createElement("div");X.style.cssText=`position: absolute; width: ${O}; height: ${I}; visibility: hidden;`,document.body.appendChild(X);const oe=X.getBoundingClientRect();document.body.removeChild(X);const K=t.left-C.left+(t.width-oe.width)/2,xe=t.top-C.top+(t.height-oe.height)/2;R.style.left=`${K}px`,R.style.top=`${xe}px`}else R.style.left=`${t.left-C.left}px`,R.style.top=`${t.top-C.top}px`,R.style.width=`${t.width}px`,R.style.height=`${t.height}px`}});return r.observe(e),()=>r.disconnect()},[M,D,E,Y,k,j,fe,ue,de,O,I]),n.useEffect(()=>{U(g.current.x,g.current.y)},[]),n.useEffect(()=>{if(!F||F<=0)return;let e=null,r=performance.now();const v=i=>{const l=i-r;if(r=i,!q.current&&!B.current&&!P.current){const m=F*l/1e3,u=Re(g.current.y+m);g.current={x:g.current.x,y:u},U(g.current.x,u)}e=requestAnimationFrame(v)};return e=requestAnimationFrame(v),()=>{e&&cancelAnimationFrame(e)}},[F]);const ge=n.useCallback(()=>{G.current&&(cancelAnimationFrame(G.current),G.current=null)},[]),_e=n.useCallback((e,r)=>{let i=_(e,-1.4,1.4)*80,l=_(r,-1.4,1.4)*80,m=0;const u=_(Q??.6,0,1),x=.94+.055*u,w=.015-.01*u,d=Math.round(90+270*u),h=()=>{if(i*=x,l*=x,Math.abs(i)<w&&Math.abs(l)<w){G.current=null;return}if(++m>d){G.current=null;return}const p=_(g.current.x-l/200,-z,z),a=Re(g.current.y+i/200);g.current={x:p,y:a},U(p,a),G.current=requestAnimationFrame(h)};ge(),G.current=requestAnimationFrame(h)},[Q,z,ge]);Ke({onDragStart:({event:e})=>{if(B.current)return;ge();const r=e;q.current=!0,H.current=!1,ye.current={...g.current},te.current={x:r.clientX,y:r.clientY}},onDrag:({event:e,last:r,velocity:v=[0,0],direction:i=[0,0],movement:l})=>{if(B.current||!q.current||!te.current)return;const m=e,u=m.clientX-te.current.x,x=m.clientY-te.current.y;H.current||u*u+x*x>16&&(H.current=!0);const w=_(ye.current.x-x/f,-z,z),d=Re(ye.current.y+u/f);if((g.current.x!==w||g.current.y!==d)&&(g.current={x:w,y:d},U(w,d)),r){q.current=!1;let[h,p]=v;const[a,R]=i;let A=h*a,t=p*R;if(Math.abs(A)<.001&&Math.abs(t)<.001&&Array.isArray(l)){const[C,$]=l;A=_(C/f*.02,-1.2,1.2),t=_($/f*.02,-1.2,1.2)}(Math.abs(A)>.005||Math.abs(t)>.005)&&_e(A,t),H.current&&(he.current=performance.now()),H.current=!1}}},{target:V,eventOptions:{passive:!0}}),n.useEffect(()=>{const e=me.current;if(!e)return;const r=()=>{var t,C;if(performance.now()-Me.current<250)return;const i=B.current;if(!i)return;const l=i.parentElement,m=(t=W.current)==null?void 0:t.querySelector(".enlarge");if(!m)return;const u=l.querySelector(".item__image--reference"),x=pe.current;if(!x){m.remove(),u&&u.remove(),l.style.setProperty("--rot-y-delta","0deg"),l.style.setProperty("--rot-x-delta","0deg"),i.style.visibility="",i.style.zIndex=0,B.current=null,(C=N.current)==null||C.removeAttribute("data-enlarging"),P.current=!1,ne();return}const w=m.getBoundingClientRect(),d=N.current.getBoundingClientRect(),h={left:x.left-d.left,top:x.top-d.top,width:x.width,height:x.height},p={left:w.left-d.left,top:w.top-d.top,width:w.width,height:w.height},a=document.createElement("div");a.className="enlarge-closing",a.style.cssText=`position:absolute;left:${p.left}px;top:${p.top}px;width:${p.width}px;height:${p.height}px;z-index:9999;border-radius: var(--enlarge-radius, 32px);overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35);transition:all ${o}ms ease-out;pointer-events:none;margin:0;transform:none;`;const R=m.querySelector("img");if(R){const $=R.cloneNode();$.style.cssText="width:100%;height:100%;object-fit:cover;",a.appendChild($)}m.remove(),N.current.appendChild(a),a.getBoundingClientRect(),requestAnimationFrame(()=>{a.style.left=h.left+"px",a.style.top=h.top+"px",a.style.width=h.width+"px",a.style.height=h.height+"px",a.style.opacity="0"});const A=()=>{a.remove(),pe.current=null,u&&u.remove(),l.style.transition="none",i.style.transition="none",l.style.setProperty("--rot-y-delta","0deg"),l.style.setProperty("--rot-x-delta","0deg"),requestAnimationFrame(()=>{var $;i.style.visibility="",i.style.opacity="0",i.style.zIndex=0,B.current=null,($=N.current)==null||$.removeAttribute("data-enlarging"),requestAnimationFrame(()=>{l.style.transition="",i.style.transition="opacity 300ms ease-out",requestAnimationFrame(()=>{i.style.opacity="1",setTimeout(()=>{var X;i.style.transition="",i.style.opacity="",P.current=!1,!q.current&&((X=N.current)==null?void 0:X.getAttribute("data-enlarging"))!=="true"&&document.body.classList.remove("dg-scroll-lock")},300)})})})};a.addEventListener("transitionend",A,{once:!0})};e.addEventListener("click",r);const v=i=>{i.key==="Escape"&&r()};return window.addEventListener("keydown",v),()=>{e.removeEventListener("click",r),window.removeEventListener("keydown",v)}},[o,ne]);const se=n.useCallback(e=>{var ke,je,ze,Ne;if(P.current)return;P.current=!0,Me.current=performance.now(),Ce();const r=e.parentElement;B.current=e,e.setAttribute("data-focused","true");const v=le(r,"offsetX",0),i=le(r,"offsetY",0),l=le(r,"sizeX",2),m=le(r,"sizeY",2),u=Qe(v,i,l,m,c),x=Se(u.rotateY),w=Se(g.current.y);let d=-(x+w)%360;d<-180&&(d+=360);const h=-u.rotateX-g.current.x;r.style.setProperty("--rot-y-delta",`${d}deg`),r.style.setProperty("--rot-x-delta",`${h}deg`);const p=document.createElement("div");p.className="item__image item__image--reference",p.style.opacity="0",p.style.transform=`rotateX(${-u.rotateX}deg) rotateY(${-u.rotateY}deg)`,r.appendChild(p),p.offsetHeight;const a=p.getBoundingClientRect(),R=(ke=V.current)==null?void 0:ke.getBoundingClientRect(),A=(je=ee.current)==null?void 0:je.getBoundingClientRect();if(!R||!A||a.width<=0||a.height<=0){P.current=!1,B.current=null,r.removeChild(p),ne();return}pe.current={left:a.left,top:a.top,width:a.width,height:a.height},e.style.visibility="hidden",e.style.zIndex=0;const t=document.createElement("div");t.className="enlarge",t.style.position="absolute";const C=T=>T==null||T===""?null:typeof T=="number"?`${T}px`:String(T),$=C(O)||`${A.width}px`,X=C(I)||`${A.height}px`;t.style.width=$*1.04,t.style.height=X,t.style.left="0px",t.style.top="0px",t.style.opacity="0",t.style.zIndex="30",t.style.willChange="transform, opacity",t.style.transformOrigin="top left",t.style.transition=`transform ${o}ms ease, opacity ${o}ms ease`;const oe=r.dataset.src||((ze=e.querySelector("img"))==null?void 0:ze.src)||"",K=r.dataset.title||r.dataset.alt||((Ne=e.querySelector("img"))==null?void 0:Ne.alt)||"Inspiration detail",xe=r.dataset.description||"",Z=document.createElement("div");Z.className="enlarge__card";const L=document.createElement("button");L.type="button",L.className="enlarge__close",L.setAttribute("aria-label","Close inspiration detail"),L.innerHTML="&times;",L.addEventListener("click",T=>{var Xe;T.stopPropagation(),(Xe=me.current)==null||Xe.click()});const be=document.createElement("div");be.className="enlarge__media";const ae=document.createElement("img");ae.src=oe,ae.alt=K,ae.draggable=!1,be.appendChild(ae);const ie=document.createElement("div");ie.className="enlarge__content";const $e=document.createElement("h3");$e.textContent=K;const Te=document.createElement("p");Te.textContent=xe||K,ie.appendChild($e),ie.appendChild(Te),Z.appendChild(L),Z.appendChild(be),Z.appendChild(ie),t.appendChild(Z),W.current.appendChild(t);const Ee=t.getBoundingClientRect(),S=W.current,Ye=(S==null?void 0:S.getBoundingClientRect())??A,He=(S==null?void 0:S.clientWidth)??Ye.width,Ge=(S==null?void 0:S.clientHeight)??Ye.height,Le=(He-Ee.width)/2,Oe=(Ge-Ee.height)/2;t.style.left=`${Le}px`,t.style.top=`${Oe}px`;const ce=t.getBoundingClientRect(),Ie=a.left-ce.left,Ve=a.top-ce.top,ve=a.width/ce.width,we=a.height/ce.height,We=isFinite(ve)&&ve>0?ve:1,Ue=isFinite(we)&&we>0?we:1;t.style.transform=`translate(${Ie}px, ${Ve}px) scale(${We}, ${Ue})`,setTimeout(()=>{var T;t.parentElement&&(t.style.opacity="1",t.style.transform="translate(0px, 0px) scale(1, 1)",(T=N.current)==null||T.setAttribute("data-enlarging","true"))},16)},[o,Ce,I,O,c,ne]),Fe=n.useCallback(e=>{q.current||H.current||performance.now()-he.current<80||P.current||se(e.currentTarget)},[se]),qe=n.useCallback(e=>{e.pointerType==="touch"&&(q.current||H.current||performance.now()-he.current<80||P.current||se(e.currentTarget))},[se]);return n.useEffect(()=>()=>{document.body.classList.remove("dg-scroll-lock")},[]),b.jsx("div",{ref:N,className:"sphere-root",style:{"--segments-x":c,"--segments-y":c,"--overlay-blur-color":j,"--tile-radius":ue,"--enlarge-radius":de,"--image-filter":fe?"grayscale(1)":"none"},children:b.jsxs("main",{ref:V,className:"sphere-main",children:[b.jsx("div",{className:"stage",children:b.jsx("div",{ref:Ae,className:"sphere",children:Pe.map((e,r)=>b.jsx("div",{className:"item","data-src":e.src,"data-offset-x":e.x,"data-offset-y":e.y,"data-size-x":e.sizeX,"data-size-y":e.sizeY,"data-alt":e.alt,"data-title":e.title,"data-description":e.description,style:{"--offset-x":e.x,"--offset-y":e.y,"--item-size-x":e.sizeX,"--item-size-y":e.sizeY},children:b.jsx("div",{className:"item__image",role:"button",tabIndex:0,"aria-label":e.alt||"Open image",onClick:Fe,onPointerUp:qe,children:b.jsx("img",{src:e.src,draggable:!1,alt:e.alt})})},`${e.x},${e.y},${r}`))})}),Be&&b.jsxs(b.Fragment,{children:[b.jsx("div",{className:"overlay"}),b.jsx("div",{className:"overlay overlay--blur"}),b.jsx("div",{className:"edge-fade edge-fade--top"}),b.jsx("div",{className:"edge-fade edge-fade--bottom"})]}),b.jsxs("div",{className:"viewer",ref:W,children:[b.jsx("div",{ref:me,className:"scrim"}),b.jsx("div",{ref:ee,className:"frame"})]})]})})}et.propTypes={images:s.arrayOf(s.oneOfType([s.string,s.shape({src:s.string,alt:s.string})])),fit:s.number,fitBasis:s.oneOf(["auto","min","max","width","height"]),minRadius:s.number,maxRadius:s.number,padFactor:s.number,overlayBlurColor:s.string,maxVerticalRotationDeg:s.number,dragSensitivity:s.number,enlargeTransitionMs:s.number,segments:s.number,autoRotateSpeed:s.number,dragDampening:s.number,openedImageWidth:s.oneOfType([s.string,s.number]),openedImageHeight:s.oneOfType([s.string,s.number]),imageBorderRadius:s.oneOfType([s.string,s.number]),openedImageBorderRadius:s.oneOfType([s.string,s.number]),grayscale:s.bool,showOverlays:s.bool};export{et as default};
